<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PDF Extractor UI</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{margin:0;font-family:system-ui,Arial,sans-serif;background:#0e1116;color:#e6e6e6;}
    header{background:#1f2630;padding:.9rem 1.2rem;display:flex;justify-content:space-between;align-items:center;}
    h1{margin:0;font-size:1rem;letter-spacing:.5px;}
    main{padding:1.2rem;max-width:1100px;margin:0 auto;}
    section{background:#151b22;padding:1rem 1.1rem;border:1px solid #232c36;border-radius:8px;margin-bottom:1rem;}
    code{background:#222;padding:.15rem .35rem;border-radius:4px;font-size:.75rem;}
    table{border-collapse:collapse;width:100%;font-size:.75rem;}
    th,td{border-bottom:1px solid #242f39;padding:.45rem .55rem;vertical-align:top;}
    th{background:#1d252f;text-align:left;font-weight:600;letter-spacing:.5px;font-size:.65rem;}
    input,button{font:inherit;}
    input[type=file]{color:#ccc;}
    .btn{background:#2d4b91;color:#fff;border:0;padding:.55rem .9rem;border-radius:5px;cursor:pointer;font-size:.7rem;font-weight:600;letter-spacing:.4px;}
    .btn.secondary{background:#2f693a;}
    .mono{font-family:ui-monospace,Menlo,Consolas,monospace;}
    footer{margin:2rem 0 3rem;font-size:.6rem;opacity:.65;text-align:center;}
    .pill{display:inline-block;background:#2d3440;padding:.15rem .5rem;border-radius:999px;font-size:.55rem;margin-right:.25rem;letter-spacing:.5px;}
    .grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));align-items:start;}
    .fade{opacity:.65;}
    #status{font-size:.65rem;}
    details{margin-top:.6rem;}
    .success{color:#58d389;}
    .error{color:#ff6464;}
  </style>
</head>
<body>
  <header>
    <h1>PDF Extractor</h1>
    <div id="status" class="fade">Idle</div>
  </header>
  <main>
    <div class="grid">
      <section>
        <h2 style="margin:0 0 .6rem;font-size:.85rem;font-weight:600;">1. Upload PDF</h2>
        <form id="uploadForm" enctype="multipart/form-data">
          <input type="file" id="pdfFile" name="file" accept="application/pdf" style="display:block;margin-bottom:.6rem;" />
          <button class="btn" type="submit" id="uploadBtn" disabled>Upload</button>
        </form>
        <div id="uploadMsg" class="fade" style="min-height:1rem;font-size:.65rem;"></div>
      </section>
      <section>
        <h2 style="margin:0 0 .6rem;font-size:.85rem;font-weight:600;">2. Process</h2>
        <input id="processId" placeholder="Report ID" style="width:100%;margin:0 0 .6rem;padding:.5rem .6rem;border:1px solid #2a3644;border-radius:4px;background:#11171e;color:#ddd;" />
        <button class="btn secondary" id="processBtn" disabled>Process</button>
        <div id="processMsg" class="fade" style="font-size:.65rem;margin-top:.5rem;min-height:1rem;"></div>
      </section>
      <section style="grid-column:1/-1;">
        <h2 style="margin:0 0 .6rem;font-size:.85rem;font-weight:600;">3. Reports</h2>
        <div style="display:flex;gap:.6rem;align-items:center;margin-bottom:.5rem;flex-wrap:wrap;">
          <button class="btn" id="refreshBtn" style="background:#3d566f;">Refresh</button>
          <button class="btn" id="viewDetailBtn" style="background:#394661;" disabled>Open</button>
          <input id="filterInput" placeholder="Filter id..." style="padding:.45rem .6rem;border:1px solid #2a3644;border-radius:4px;background:#11171e;color:#ddd;font-size:.65rem;" />
          <button class="btn" id="downloadJsonBtn" style="background:#30507a;" disabled>Download JSON</button>
        </div>
        <div id="reportsHost" class="mono" style="font-size:.6rem;line-height:1.3;max-height:200px;overflow:auto;border:1px solid #232c36;padding:.5rem;border-radius:6px;background:#10161d;">(none loaded)</div>
        <details style="margin-top:.6rem;">
          <summary style="cursor:pointer;font-size:.65rem;">API Help</summary>
          <div style="font-size:.6rem;line-height:1.4;margin-top:.5rem;">
            POST <code>/upload</code> (multipart <code>file</code>) → id<br>
            POST <code>/process</code> JSON <code>{ id }</code><br>
            GET <code>/reports</code> list<br>
            GET <code>/report/:id</code> detail<br>
            GET <code>/export/:id?format=json</code> raw<br>
          </div>
        </details>
        <div id="detail" style="margin-top:1rem;font-size:.65rem;"></div>
      </section>
    </div>
    <footer>Embedded UI (enhanced) • Replace with full build later</footer>
  </main>
  <script type="module" src="/app.js?v=embedded"></script>
</body>
</html>
